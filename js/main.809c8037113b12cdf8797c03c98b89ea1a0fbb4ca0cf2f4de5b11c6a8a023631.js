(()=>{document.addEventListener("DOMContentLoaded",()=>{let l=document.querySelector(".menu-toggle"),t=document.querySelector(".sidebar"),d=document.querySelector(".site-header"),h=document.querySelector("main"),c=()=>{if(!d||!t)return;let e=d.offsetHeight;window.innerWidth<=768?(t.style.transition="top 0.3s ease-in-out",t.classList.contains("active")?(t.style.top=`${e}px`,t.style.height=`calc(100vh - ${e}px)`):(t.style.top="-100vh",t.style.height="100vh")):(t.classList.remove("active"),t.style.top="",t.style.height="",t.style.transition="none")},f=e=>{let a=document.querySelectorAll(".sidebar a"),o=null;if(a.forEach(n=>{n.classList.remove("active","ancestor"),n.href===e&&(n.classList.add("active"),o=n)}),o){let n=o.parentElement;for(;n;){if(n.tagName==="LI"){let i=n.parentElement;if(i&&i.tagName==="UL"){let s=i.parentElement;if(s&&s.tagName==="LI"){let r=s.querySelector("a");r&&r.classList.add("ancestor")}}}n=n.parentElement}}},m=(e,a=!0)=>{fetch(e).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return o.text()}).then(o=>{let i=new DOMParser().parseFromString(o,"text/html"),s=i.querySelector("main"),r=i.querySelector("title").textContent;s&&h?(h.innerHTML=s.innerHTML,document.title=r,a&&history.pushState({path:e},r,e),f(e)):window.location.href=e}).catch(o=>{console.error("Failed to fetch page:",o),window.location.href=e})};l&&t&&l.addEventListener("click",()=>{t.classList.toggle("active"),c()}),window.addEventListener("resize",c),document.querySelectorAll(".sidebar a").forEach(e=>{e.addEventListener("click",a=>{e.hostname!==window.location.hostname||e.getAttribute("href").startsWith("#")||(a.preventDefault(),m(e.href),t&&window.innerWidth<=768&&t.classList.contains("active")&&(t.classList.remove("active"),c()))})}),window.addEventListener("popstate",e=>{e.state&&e.state.path&&m(e.state.path,!1)}),c(),f(window.location.href)});})();
